(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(26)},20:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(10),o=a.n(r),c=(a(20),a(27));a(6);var s=function(e){let{onClose:t}=e;const[a,r]=Object(n.useState)({nazwa:"",email:""}),[o,s]=Object(n.useState)({}),i=localStorage.getItem("serverAddress");return l.a.createElement("div",{className:"userModal"},l.a.createElement("h2",null,"Dodaj U\u017cytkownika"),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const n=(e=>{let t={};return e.nazwa.trim()||(t.nazwa="Nazwa jest wymagana"),e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email jest nieprawid\u0142owy"):t.email="Email jest wymagany",t})(a);if(s(n),0===Object.keys(n).length)try{await c.a.post("".concat(i,"/addUser"),a),alert("U\u017cytkownik dodany"),t()}catch(l){console.error("B\u0142\u0105d przy dodawaniu u\u017cytkownika",l)}}},l.a.createElement("input",{type:"text",value:a.nazwa,onChange:e=>r({...a,nazwa:e.target.value}),placeholder:"Nazwa"}),o.nazwa&&l.a.createElement("div",{className:"error"},o.nazwa),l.a.createElement("input",{type:"email",value:a.email,onChange:e=>r({...a,email:e.target.value}),placeholder:"Email"}),o.email&&l.a.createElement("div",{className:"error"},o.email),l.a.createElement("button",{type:"submit"},"Dodaj")),l.a.createElement("button",{onClick:t},"Zamknij"))};var i=function(e){let{onClose:t}=e;const[a,r]=Object(n.useState)({tytul:"",opis:"",gatunek:""}),[o,s]=Object(n.useState)({}),i=localStorage.getItem("serverAddress");return l.a.createElement("div",{className:"filmModal"},l.a.createElement("h2",null,"Dodaj Film"),l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const n=(e=>{let t={};return e.tytul.trim()||(t.tytul="Tytu\u0142 jest wymagany"),e.opis.trim()||(t.opis="Opis jest wymagany"),e.gatunek.trim()||(t.gatunek="Gatunek jest wymagany"),t})(a);if(s(n),0===Object.keys(n).length)try{await c.a.post("".concat(i,"/addFilm"),a),alert("Film dodany"),t()}catch(l){console.error("B\u0142\u0105d przy dodawaniu filmu",l)}}},l.a.createElement("input",{type:"text",value:a.tytul,onChange:e=>r({...a,tytul:e.target.value}),placeholder:"Tytu\u0142"}),o.tytul&&l.a.createElement("div",{className:"error"},o.tytul),l.a.createElement("input",{type:"text",value:a.opis,onChange:e=>r({...a,opis:e.target.value}),placeholder:"Opis"}),o.opis&&l.a.createElement("div",{className:"error"},o.opis),l.a.createElement("input",{type:"text",value:a.gatunek,onChange:e=>r({...a,gatunek:e.target.value}),placeholder:"Gatunek"}),o.gatunek&&l.a.createElement("div",{className:"error"},o.gatunek),l.a.createElement("button",{type:"submit"},"Dodaj")),l.a.createElement("button",{onClick:t},"Zamknij"))};var u=function(e){let{uID:t,film:a,onClose:r}=e;const[o,s]=Object(n.useState)({userId:t,filmId:a.id,ocena:""});return l.a.createElement("div",{className:"rateFilmModal"},l.a.createElement("h2",null,"Oce\u0144 Film: ",a.tytul),l.a.createElement("form",{onSubmit:async e=>{const a=localStorage.getItem("serverAddress");e.preventDefault();try{console.log(t),await c.a.post("".concat(a,"/addRating"),o),alert("Film oceniony"),r()}catch(n){console.error("B\u0142\u0105d przy ocenianiu filmu",n)}}},l.a.createElement("input",{type:"number",value:o.ocena,onChange:e=>s({...o,ocena:e.target.value}),placeholder:"Ocena"}),l.a.createElement("button",{type:"submit"},"Oce\u0144")),l.a.createElement("button",{onClick:r},"Zamknij"))};var m=function(e){let{films:t,onFilmSelect:a}=e;return l.a.createElement("div",{className:"filmList"},l.a.createElement("h2",null,"Lista Film\xf3w"),l.a.createElement("ul",null,t.map(e=>l.a.createElement("li",{key:e.tytul,onClick:()=>a(e)},e.tytul))))};var d=function(e){let{userId:t}=e;const[a,r]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const e=localStorage.getItem("serverAddress");console.log("wywolanie:"+t),c.a.get("".concat(e,"/recommendations/").concat(t)).then(e=>r(e.data)).catch(e=>console.error("B\u0142\u0105d przy pobieraniu rekomendacji",e))},[t]),l.a.createElement("div",null,l.a.createElement("h2",null,"Rekomendacje Film\xf3w"),l.a.createElement("ul",null,a.map((e,t)=>l.a.createElement("li",{key:t},e.film.properties.tytul," - Rekomendacje: ",e.recommendationCount))))},p=(a(25),a(9));var g=function(){const[e,t]=Object(n.useState)({nodes:[],edges:[]}),a=Object(n.useRef)(null);return Object(n.useEffect)(()=>{const e=localStorage.getItem("serverAddress");c.a.get("".concat(e,"/getGraphData")).then(e=>{const{nodes:a,edges:n}=e.data,l=a.map(e=>{const t=JSON.parse(e.title);return{...e,label:t.nazwa||t.tytul||e.label,title:Object.entries(t).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a)}).join(", ")}}),r=n.map(e=>({...e,label:e.label+(e.ocena?" (".concat(e.ocena,")"):""),arrows:"to"}));t({nodes:new p.a(l),edges:new p.a(r)})}).catch(e=>console.error("B\u0142\u0105d przy pobieraniu danych grafu",e))},[]),Object(n.useEffect)(()=>{if(a.current){const t={nodes:{shape:"dot",size:16,font:{size:14}},edges:{font:{size:12,align:"top"},color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},arrows:{to:{enabled:!0,scaleFactor:1,type:"arrow"}}}};new p.b(a.current,e,t)}},[e]),l.a.createElement("div",{ref:a,style:{height:"500px",width:"100%"}})};var y=function(){const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)([]),[o,p]=Object(n.useState)(0),[y,E]=Object(n.useState)(!0),[v,b]=Object(n.useState)(!1),[f,w]=Object(n.useState)(null);localStorage.setItem("serverAddress","https://projekt-co.vercel.app");const h=localStorage.getItem("serverAddress");return Object(n.useEffect)(()=>{c.a.get("".concat(h,"/getAllFilms")).then(e=>t(e.data)),c.a.get("".concat(h,"/getAllUsers")).then(e=>r(e.data))},[]),l.a.createElement("div",{className:"App"},l.a.createElement("button",{onClick:()=>{E(!0),b(!1)}},"Dodaj U\u017cytkownika"),l.a.createElement("button",{onClick:()=>{b(!0),E(!1)}},"Dodaj Film"),y&&l.a.createElement(s,{onClose:()=>E(!1)}),v&&l.a.createElement(i,{onClose:()=>b(!1)}),l.a.createElement("div",null,"Wybierz u\u017cytkownika:",l.a.createElement("select",{onChange:e=>(e=>{p(parseInt(e))})(e.target.value),value:o},a.map(e=>l.a.createElement("option",{key:e.id,value:e.id},e.nazwa)))),l.a.createElement(m,{films:e,onFilmSelect:w}),f&&l.a.createElement(u,{uID:o,film:f,onClose:()=>w(null)}),l.a.createElement(d,{userId:o}),l.a.createElement(g,null))};var E=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,28)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:o}=t;a(e),n(e),l(e),r(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null))),E()},6:function(e,t,a){}},[[11,1,2]]]);
//# sourceMappingURL=main.2085c6ab.chunk.js.map